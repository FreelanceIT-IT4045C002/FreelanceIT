<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FreelanceIT</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{//cdn.datatables.net/2.1.8/css/dataTables.dataTables.min.css}">

    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/css/layout.css}">
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
<header>
    <nav>
        <a href="javascript:;" class="logo">
            <img th:src="@{/images/logo.svg}" alt="">
        </a>

        <div class="menuWrap">
            <ul class="menu">
                <li>
                    <a href="/">Freelance It</a>
                </li>
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/add/project">Add Project</a>
                </li>
                <li>
                    <a href="/add/task">Add Task</a>
                </li>
                <li>
                    <a href="/add/todo">Add ToDo</a>
                </li>
                <li>
                    <a href="/inprogress">In Progress</a>
                </li>

            </ul>
        </div>
        <div class="side-menu">
            <ul>
                <li>
                    <a href="javascript:;">
                        <i class="fa fa-bell"></i>
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <img th:src="@{/images/profile-img.jpg}" alt="">
                        <span>K.Anderson <i class="fa fa-chevron-down"></i></span>
                    </a>
                </li>
            </ul>
        </div>
        <div class="menu-Bar">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>
</header>


    <div class="form-container">
          <h2>Add Task</h2>
         <!-- Add onsubmit event to form to trigger the JavaScript function -->
          <form onsubmit="handleSubmit(event)">
            <div class="form-group">
              <label for="title">Add Title:</label>
              <input type="text" id="title" name="title" class="input-field" required>
            </div>
            <div class="form-group">
              <label for="description">Description:</label>
              <textarea id="description" name="description" class="input-field" required></textarea>
            </div>
            <div class="form-group">
              <label for="screenshot">Add screenshot <span class="plus">+</span>:</label>
              <input type="file" id="screenshot" name="screenshot" class="input-field">
            </div>
            <div class="form-group">
              <label for="assigned">Assigned to:</label>
              <input type="text" id="assigned" name="assigned" class="input-field" required>
            </div>
           <!-- Submit button -->
            <div class="form-group submit-group">
              <input type="submit" value="Submit Task" class="submit-button">
            </div>
          </form>
        </div>
  </div>
 <script>
    // Function to handle form submission
    function handleSubmit(event) {
        event.preventDefault(); // Prevent default form submission

        // Get the input values from the form
        const taskTitle = document.getElementById('title').value;
        const taskDescription = document.getElementById('description').value;
        const taskAssigned = document.getElementById('assigned').value;
        // Note: File input handling for screenshots would need to be implemented separately

        // Store the task in localStorage
        if (taskTitle && taskDescription && taskAssigned) {
            let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

            // Create a new task object
            const newTask = {
                title: taskTitle,
                description: taskDescription,
                assigned: taskAssigned,
                // screenshot: document.getElementById('screenshot').files[0] // Handling file upload requires additional steps
            };

            // Add the new task to the array
            tasks.push(newTask);
            localStorage.setItem('tasks', JSON.stringify(tasks));

            // Display a popup message
            alert("Task added successfully!");

            // Redirect to Taskpage.html
            window.location.href = "/add/task";
        } else {
            alert("Please fill in all required fields.");
        }
    }
</script>

<!-- jQuery and Bootstrap JS -->
<script th:src="@{/js/jquery.js}"></script>
<script th:src="@{/js/bootstrap.min.js}"></script>

<!-- Datatables and custom JS -->
<script th:src="@{/js/datatables.js}"></script>
<script th:src="@{//cdn.datatables.net/2.1.8/js/dataTables.min.js}"></script>
<script th:src="@{/js/custom.js}"></script>

</body>

</html>
